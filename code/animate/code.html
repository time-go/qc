<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>animate</title>
    <style>
        .rect {
            width: 200px;
            height: 200px;
            background: red;
        }
    </style>
    <script src="jquery-1.11.2.min.js"></script>
    <script src="qc.min.js"></script>
</head>
<body>
<div q-view="myview">
    <div q-visible="{show}" q-animate="testAnimate" class="rect"></div>
    <input q-click="veAnimate" type="button" value="click">
    <br>
    <ul q-each="list">
        <li q-animate="testAnimate"><span q-text="{text}"></span></li>
    </ul>
    <input q-click="add" type="button" value="add">
    <input q-click="remove" type="button" value="remove">
</div>
</body>
</html>
<script>
    /*
    *
     *Here we need to refer to the jQuery module, because animation demo is based on jQuery for code introduction.
    * */
    /*//Custom animation here action has two values.
     *Action hides the animation of the state for the enter leave that displays the status of the state.
     * Run executes animation when action is leave and calls callback.
     * */
    qc.animate.testAnimate = function (action, run) {
        if (action == "enter") {
            $(this).hide();
            $(this).slideDown();
        } else if (action == "leave") {
            $(this).slideUp(function () {
                run();
            })
        }
    }
    qc.view("myview", function (vm, ve) {
        vm.show = true;
        vm.list = [{text: "test" + qc.getRandom()}];
        ve.veAnimate = function () {
            vm.setValue("show", !vm.show);
        }
        ve.add = function () {
            //vm.listpush({text: "test" + qc.getRandom()})
            vm.listconcat([{text: "test" + qc.getRandom()}, {text: "test" + qc.getRandom()}])
            //vm.listunshift({text: "test" + qc.getRandom()});
        }
        ve.remove = function () {
            vm.listsplice(0, 1);
            //vm.listpop();
            //vm.listshift()
        }
    })
</script>